(()=>{"use strict";var e,t={384:(e,t,o)=>{const s=window.wp.blocks,l=window.React,c=window.wp.i18n,r=window.wp.blockEditor,a=window.wp.components,n=window.wp.element,i=window.wp.serverSideRender;var d=o.n(i);const u=window.wp.apiFetch;var p=o.n(u);function h({onSelect:e}){const[t,o]=(0,n.useState)(""),[s,r]=(0,n.useState)([]),[i,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1);return(0,l.createElement)("div",{className:"prodshow-product-search"},(0,l.createElement)(a.SearchControl,{label:(0,c.__)("Search Products","products-showcase"),value:t,onChange:async e=>{if(o(e),e.length<2)return r([]),void h(!1);d(!0),h(!1);try{const t=await p()({path:`/prodshow-shopify/v1/search-products?query=${encodeURIComponent(e)}`});r(t.products||[]),h(!0)}catch(e){r([]),h(!0)}finally{d(!1)}},placeholder:(0,c.__)("Type to search products...","products-showcase"),help:(0,c.__)("Search by product name or handle","products-showcase")}),i&&(0,l.createElement)("div",{className:"prodshow-search-loading"},(0,l.createElement)(a.Spinner,null),(0,l.createElement)("span",null,(0,c.__)("Searching...","products-showcase"))),!i&&u&&0===s.length&&(0,l.createElement)("p",{className:"prodshow-no-results"},(0,c.__)("No products found. Try a different search term.","products-showcase")),s.length>0&&(0,l.createElement)("div",{className:"prodshow-search-results"},s.map(t=>(0,l.createElement)("div",{key:t.id,className:"prodshow-search-result-item"},t.image&&(0,l.createElement)("img",{src:t.image,alt:t.title,className:"prodshow-result-image"}),(0,l.createElement)("div",{className:"prodshow-result-info"},(0,l.createElement)("strong",null,t.title),t.handle&&(0,l.createElement)("span",{className:"prodshow-result-handle"},t.handle)),(0,l.createElement)(a.Button,{isSecondary:!0,isSmall:!0,onClick:()=>(t=>{e(t),o(""),r([]),h(!1)})(t)},(0,c.__)("Add","products-showcase"))))))}function m({onSelect:e,selectedId:t,selectedTitle:o}){const[s,r]=(0,n.useState)(""),[i,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1),[m,w]=(0,n.useState)(!1);return(0,l.createElement)("div",{className:"prodshow-collection-search"},t?(0,l.createElement)("div",{className:"prodshow-selected-collection"},(0,l.createElement)("p",null,(0,l.createElement)("strong",null,(0,c.__)("Selected Collection:","products-showcase"))),(0,l.createElement)("p",null,o),(0,l.createElement)(a.Button,{isDestructive:!0,isSmall:!0,onClick:()=>e({id:"",handle:"",title:"",image:""})},(0,c.__)("Clear Selection","products-showcase"))):(0,l.createElement)(l.Fragment,null,(0,l.createElement)(a.SearchControl,{label:(0,c.__)("Search Collections","products-showcase"),value:s,onChange:async e=>{if(r(e),e.length<2)return d([]),void w(!1);h(!0),w(!1);try{const t=await p()({path:`/prodshow-shopify/v1/search-collections?query=${encodeURIComponent(e)}`});d(t.collections||[]),w(!0)}catch(e){d([]),w(!0)}finally{h(!1)}},placeholder:(0,c.__)("Type to search collections...","products-showcase"),help:(0,c.__)("Search by collection name or handle","products-showcase")}),u&&(0,l.createElement)("div",{className:"prodshow-search-loading"},(0,l.createElement)(a.Spinner,null),(0,l.createElement)("span",null,(0,c.__)("Searching...","products-showcase"))),!u&&m&&0===i.length&&(0,l.createElement)("p",{className:"prodshow-no-results"},(0,c.__)("No collections found. Try a different search term.","products-showcase")),i.length>0&&(0,l.createElement)("div",{className:"prodshow-search-results"},i.map(t=>(0,l.createElement)("div",{key:t.id,className:"prodshow-search-result-item"},t.image&&(0,l.createElement)("img",{src:t.image,alt:t.title,className:"prodshow-result-image"}),(0,l.createElement)("div",{className:"prodshow-result-info"},(0,l.createElement)("strong",null,t.title),t.handle&&(0,l.createElement)("span",{className:"prodshow-result-handle"},t.handle),void 0!==t.productsCount&&(0,l.createElement)("span",{className:"prodshow-result-count"},t.productsCount," ",(0,c.__)("products","products-showcase"))),(0,l.createElement)(a.Button,{isPrimary:!0,isSmall:!0,onClick:()=>(t=>{e(t),r(""),d([]),w(!1)})(t)},(0,c.__)("Select","products-showcase")))))))}function w({products:e,onRemove:t,onReorder:o}){return 0===e.length?(0,l.createElement)("p",{className:"prodshow-empty-list"},(0,c.__)("No products added yet. Search and add products above.","products-showcase")):(0,l.createElement)("div",{className:"prodshow-product-list"},(0,l.createElement)("p",{className:"prodshow-list-label"},(0,l.createElement)("strong",null,(0,c.__)("Selected Products:","products-showcase")," (",e.length,")")),(0,l.createElement)("div",{className:"prodshow-product-items"},e.map((s,r)=>(0,l.createElement)("div",{key:s.productId,className:"prodshow-product-item"},s.productImage&&(0,l.createElement)("img",{src:s.productImage,alt:s.productTitle,className:"prodshow-item-image"}),(0,l.createElement)("div",{className:"prodshow-item-info"},(0,l.createElement)("strong",null,s.productTitle),s.productHandle&&(0,l.createElement)("span",{className:"prodshow-item-handle"},s.productHandle)),(0,l.createElement)("div",{className:"prodshow-item-actions"},(0,l.createElement)(a.Button,{icon:"arrow-up-alt2",label:(0,c.__)("Move up","products-showcase"),disabled:0===r,onClick:()=>(t=>{if(0===t)return;const s=[...e];[s[t-1],s[t]]=[s[t],s[t-1]],o(s)})(r),isSmall:!0}),(0,l.createElement)(a.Button,{icon:"arrow-down-alt2",label:(0,c.__)("Move down","products-showcase"),disabled:r===e.length-1,onClick:()=>(t=>{if(t===e.length-1)return;const s=[...e];[s[t],s[t+1]]=[s[t+1],s[t]],o(s)})(r),isSmall:!0}),(0,l.createElement)(a.Button,{icon:"trash",label:(0,c.__)("Remove","products-showcase"),isDestructive:!0,onClick:()=>t(s.productId),isSmall:!0}))))))}const g=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"products-showcase/products","version":"1.0.0","title":"Products Showcase","category":"widgets","icon":"cart","description":"Display Shopify products or collections in a beautiful carousel.","keywords":["shopify","products","collection","ecommerce","store"],"supports":{"align":["wide","full"],"anchor":true,"html":false},"textdomain":"products-showcase","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js","attributes":{"title":{"type":"string","default":""},"description":{"type":"string","default":""},"contentType":{"type":"string","default":"products","enum":["products","collection"]},"productList":{"type":"array","default":[],"items":{"type":"object","properties":{"productId":{"type":"string"},"productHandle":{"type":"string"},"productTitle":{"type":"string"},"productImage":{"type":"string"}}}},"collectionId":{"type":"string","default":""},"collectionHandle":{"type":"string","default":""},"collectionTitle":{"type":"string","default":""},"collectionImage":{"type":"string","default":""},"productLimit":{"type":"number","default":12,"minimum":1,"maximum":50},"disableGlobalPadding":{"type":"boolean","default":false},"ctaButton":{"type":"object","default":{"url":"","title":"","opensInNewTab":false}},"colors":{"type":"object","default":{"backgroundColor":"","textColor":"","buttonBackground":"","buttonText":"","buttonBackgroundHover":"","buttonTextHover":""}}},"example":{"attributes":{"title":"Featured Products","description":"Check out our latest collection of premium items","contentType":"products","ctaButton":{"title":"View All Products","url":"","opensInNewTab":false}}}}');(0,s.registerBlockType)(g.name,{...g,edit:function({attributes:e,setAttributes:t,clientId:o}){const{title:s,description:i,contentType:u,productList:g,collectionId:_,collectionHandle:E,collectionTitle:b,productLimit:y,disableGlobalPadding:v,ctaButton:f,colors:C}=e,S=(0,r.useBlockProps)({className:"prodshow-block-editor"}),[N,T]=(0,n.useState)(null),[k,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{B()},[]);const B=async()=>{x(!0);try{const e=await p()({path:"/prodshow-shopify/v1/connection-status"});T(e.connected)}catch(e){T(!1)}finally{x(!1)}};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(a.PanelBody,{title:(0,c.__)("Block Settings","products-showcase"),initialOpen:!0},(0,l.createElement)(a.TextControl,{label:(0,c.__)("Title","products-showcase"),value:s,onChange:e=>t({title:e}),help:(0,c.__)("Optional heading for the block","products-showcase")}),(0,l.createElement)(a.TextareaControl,{label:(0,c.__)("Description","products-showcase"),value:i,onChange:e=>t({description:e}),rows:3,help:(0,c.__)("Optional description text","products-showcase")}),(0,l.createElement)("hr",{style:{margin:"20px 0",border:"none",borderTop:"1px solid #ddd"}}),(0,l.createElement)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"}},(0,c.__)("CTA Button","products-showcase")),(0,l.createElement)(a.TextControl,{label:(0,c.__)("Button Text","products-showcase"),value:f?.title||"",onChange:e=>t({ctaButton:{...f,title:e}}),placeholder:(0,c.__)("View All Products","products-showcase")}),(0,l.createElement)(a.TextControl,{label:(0,c.__)("Button URL","products-showcase"),value:f?.url||"",onChange:e=>t({ctaButton:{...f,url:e}}),placeholder:"https://",type:"url"}),(0,l.createElement)(a.ToggleControl,{label:(0,c.__)("Open in new tab","products-showcase"),checked:f?.opensInNewTab||!1,onChange:e=>t({ctaButton:{...f,opensInNewTab:e}})}),(0,l.createElement)("hr",{style:{margin:"20px 0",border:"none",borderTop:"1px solid #ddd"}}),(0,l.createElement)(a.ToggleControl,{label:(0,c.__)("Disable Global Padding","products-showcase"),checked:v,onChange:e=>t({disableGlobalPadding:e}),help:(0,c.__)("Remove the has-global-padding class to allow full-width content","products-showcase")})),(0,l.createElement)(a.PanelBody,{title:(0,c.__)("Content Type","products-showcase"),initialOpen:!0},(0,l.createElement)(a.SelectControl,{label:(0,c.__)("Display","products-showcase"),value:u,options:[{label:(0,c.__)("Individual Products","products-showcase"),value:"products"},{label:(0,c.__)("Collection","products-showcase"),value:"collection"}],onChange:e=>t({contentType:e}),help:(0,c.__)("Choose whether to display individual products or a collection","products-showcase")})),"products"===u&&(0,l.createElement)(a.PanelBody,{title:(0,c.__)("Select Products","products-showcase"),initialOpen:!0},!1===N&&(0,l.createElement)(a.Notice,{status:"error",isDismissible:!1},(0,c.__)("Shopify API not connected. Please configure your settings.","products-showcase")),N&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(h,{onSelect:e=>{const o={productId:e.id,productHandle:e.handle,productTitle:e.title,productImage:e.image};g.some(t=>t.productId===e.id)||t({productList:[...g,o]})}}),(0,l.createElement)(w,{products:g,onRemove:e=>{t({productList:g.filter(t=>t.productId!==e)})},onReorder:e=>{t({productList:e})}}))),"collection"===u&&(0,l.createElement)(a.PanelBody,{title:(0,c.__)("Select Collection","products-showcase"),initialOpen:!0},!1===N&&(0,l.createElement)(a.Notice,{status:"error",isDismissible:!1},(0,c.__)("Shopify API not connected. Please configure your settings.","products-showcase")),N&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(m,{onSelect:e=>{t({collectionId:e.id,collectionHandle:e.handle,collectionTitle:e.title,collectionImage:e.image})},selectedId:_,selectedTitle:b}),(0,l.createElement)(a.RangeControl,{label:(0,c.__)("Product Limit","products-showcase"),value:y,onChange:e=>t({productLimit:e}),min:1,max:50,help:(0,c.__)("Number of products to display from the collection","products-showcase")})))),(0,l.createElement)(r.InspectorControls,{group:"styles"},(0,l.createElement)(r.PanelColorSettings,{title:(0,c.__)("Color","products-showcase"),initialOpen:!0,colorSettings:[{value:C?.backgroundColor,onChange:e=>t({colors:{...C,backgroundColor:e}}),label:(0,c.__)("Background","products-showcase")},{value:C?.textColor,onChange:e=>t({colors:{...C,textColor:e}}),label:(0,c.__)("Text","products-showcase")}]}),(0,l.createElement)(r.PanelColorSettings,{title:(0,c.__)("Button","products-showcase"),initialOpen:!1,colorSettings:[{value:C?.buttonBackground,onChange:e=>t({colors:{...C,buttonBackground:e}}),label:(0,c.__)("Background","products-showcase")},{value:C?.buttonText,onChange:e=>t({colors:{...C,buttonText:e}}),label:(0,c.__)("Text","products-showcase")},{value:C?.buttonBackgroundHover,onChange:e=>t({colors:{...C,buttonBackgroundHover:e}}),label:(0,c.__)("Background (Hover)","products-showcase")},{value:C?.buttonTextHover,onChange:e=>t({colors:{...C,buttonTextHover:e}}),label:(0,c.__)("Text (Hover)","products-showcase")}]})),(0,l.createElement)("div",{...S},k?(0,l.createElement)("div",{className:"prodshow-loading"},(0,l.createElement)(a.Spinner,null),(0,l.createElement)("p",null,(0,c.__)("Checking Shopify connection...","products-showcase"))):!1===N?(0,l.createElement)(a.Notice,{status:"warning",isDismissible:!1},(0,l.createElement)("p",null,(0,l.createElement)("strong",null,(0,c.__)("Shopify API Not Connected","products-showcase"))),(0,l.createElement)("p",null,(0,c.__)("Please configure your Shopify credentials in Settings â†’ Products Showcase.","products-showcase")),(0,l.createElement)(a.Button,{isSecondary:!0,onClick:B},(0,c.__)("Retry Connection","products-showcase"))):(0,l.createElement)(d(),{block:"products-showcase/products",attributes:e,LoadingResponsePlaceholder:()=>(0,l.createElement)("div",{className:"prodshow-loading"},(0,l.createElement)(a.Spinner,null),(0,l.createElement)("p",null,(0,c.__)("Loading products...","products-showcase"))),ErrorResponsePlaceholder:({response:e})=>(0,l.createElement)(a.Notice,{status:"error",isDismissible:!1},(0,l.createElement)("p",null,(0,l.createElement)("strong",null,(0,c.__)("Error loading products","products-showcase"))),(0,l.createElement)("p",null,e?.message||(0,c.__)("Unknown error","products-showcase"))),EmptyResponsePlaceholder:()=>(0,l.createElement)(a.Notice,{status:"info",isDismissible:!1},(0,l.createElement)("p",null,"products"===u?(0,c.__)("No products selected. Use the sidebar to search and add products.","products-showcase"):(0,c.__)("No collection selected. Use the sidebar to search for a collection.","products-showcase")))})))},save:()=>null})}},o={};function s(e){var l=o[e];if(void 0!==l)return l.exports;var c=o[e]={exports:{}};return t[e](c,c.exports,s),c.exports}s.m=t,e=[],s.O=(t,o,l,c)=>{if(!o){var r=1/0;for(d=0;d<e.length;d++){for(var[o,l,c]=e[d],a=!0,n=0;n<o.length;n++)(!1&c||r>=c)&&Object.keys(s.O).every(e=>s.O[e](o[n]))?o.splice(n--,1):(a=!1,c<r&&(r=c));if(a){e.splice(d--,1);var i=l();void 0!==i&&(t=i)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[o,l,c]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var l,c,[r,a,n]=o,i=0;if(r.some(t=>0!==e[t])){for(l in a)s.o(a,l)&&(s.m[l]=a[l]);if(n)var d=n(s)}for(t&&t(o);i<r.length;i++)c=r[i],s.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return s.O(d)},o=globalThis.webpackChunkproducts_showcase=globalThis.webpackChunkproducts_showcase||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var l=s.O(void 0,[350],()=>s(384));l=s.O(l)})();